(this["webpackJsonpreact-pg-crud"]=this["webpackJsonpreact-pg-crud"]||[]).push([[0],{11:function(e,t,a){e.exports={header:"Form_header__2kjWs",bar:"Form_bar__TxvD9",input:"Form_input__15V_G",buttonsPanel:"Form_buttonsPanel__3MTHz",formButton:"Form_formButton__T1MkG",cancel:"Form_cancel__1uyzY"}},17:function(e,t,a){e.exports={listItem:"ListItem_listItem__1JP2t",listItemWithButtons:"ListItem_listItemWithButtons__3hocd",buttonPanel:"ListItem_buttonPanel__sUApB",listItemLoader:"ListItem_listItemLoader__7OTrF"}},24:function(e,t,a){e.exports={cNav:"Navbar_cNav__-VaR_",cLink:"Navbar_cLink__1W4jA",cNavMenu:"Navbar_cNavMenu__1Fqa2",cNavMenuItem:"Navbar_cNavMenuItem__2JCRL",cBrand:"Navbar_cBrand__3jx2S",Brand:"Navbar_Brand__R8qEE"}},30:function(e,t,a){e.exports={page:"Pages_page__1mS9y"}},33:function(e,t,a){e.exports={modalMenu:"ModalMenu_modalMenu__AmLr0",modalMenuOverlay:"ModalMenu_modalMenuOverlay__3ss5X",modalMenuContent:"ModalMenu_modalMenuContent__3xIn0"}},54:function(e,t,a){e.exports={actionButton:"ActionButton_actionButton__skfiY"}},58:function(e,t,a){e.exports={searchBarContainer:"SearchBar_searchBarContainer__2R0mq"}},59:function(e,t,a){e.exports={list:"List_list__1Astg"}},60:function(e,t,a){e.exports=a(89)},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(51),o=a.n(r),l=a(29),u=a(19),i=a(24),s=a.n(i),m=s.a.cNav,d=s.a.cNavMenu,p=s.a.cNavMenuItem,E=s.a.cLink,h=s.a.cBrand,f=function(e){var t=e.links;return c.a.createElement("div",{className:m},c.a.createElement("ul",{className:d},t&&t.map((function(e,t){var a=e.brand,n=e.path,r=e.name;return c.a.createElement("li",{className:"".concat(p," ").concat(a&&h),key:t},c.a.createElement(l.b,{className:E,to:n},r))}))))},_=a(26),b=a(27),v=a(54),O=a.n(v).a.actionButton,y=function(e){var t=e.action;return c.a.createElement("button",{className:O,onClick:t},c.a.createElement(_.a,{icon:b.c}))},N=a(30),L=a.n(N),j=L.a.page;function F(){return c.a.createElement("div",{className:j},c.a.createElement("h1",null,"About"),c.a.createElement("br",null),c.a.createElement("p",null,"React-pg-crud was made only as a proof of concept, to compare React and Vue in terms of maintainability, scalability and simplicity."),c.a.createElement("p",null,"With this project I've learned how to use Typescript with React."))}var g=a(3),A=a.n(g),C=a(10),T=a(32),M=a(34),G=a(15),I=a(5),D=a(4),x="https://pg-raw-api.herokuapp.com/api/contacts/",R={contactFormActive:!1,deleteFormActive:!1,currentContactData:{name:"",phone:"",id:null},search:"",data:null,isLoading:!0,error:"",offset:0,updateSwitch:!1};function k(e,t){var a,n;switch(t.type){case"DATA_FETCHED":return Object(D.a)(Object(D.a)({},e),{},{data:t.payload});case"TOGGLE_LOADING":return Object(D.a)(Object(D.a)({},e),{},{isLoading:t.payload});case"CLEAN_LOADING":return Object(D.a)(Object(D.a)({},e),{},{isLoading:!0,data:null});case"UPDATE":return Object(D.a)(Object(D.a)({},e),{},{updateSwitch:!e.updateSwitch,search:"",offset:0});case"SEARCH":return Object(D.a)(Object(D.a)({},e),{},{search:t.payload,offset:0});case"OFFSET":return Object(D.a)(Object(D.a)({},e),{},{offset:e.offset+1});case"ERROR":return Object(D.a)(Object(D.a)({},e),{},{error:t.payload});case"PUSH_MORE_DATA":return e.data?(n=[].concat(Object(I.a)(e.data),Object(I.a)(t.payload)),Object(D.a)(Object(D.a)({},e),{},{data:n})):Object(D.a)(Object(D.a)({},e),{},{data:t.payload});case"TOGGLE_EDIT_FORM":return a=t.payload?t.payload:{name:"",phone:"",id:null},Object(D.a)(Object(D.a)({},e),{},{contactFormActive:!e.contactFormActive,currentContactData:a});case"TOGGLE_DELETE_FORM":return a=t.payload?t.payload:{name:"",phone:"",id:null},Object(D.a)(Object(D.a)({},e),{},{currentContactData:a,deleteFormActive:!e.deleteFormActive});default:throw new Error}}var w=Object(n.createContext)({}),B=function(e){var t=e.children,a=Object(n.useReducer)(k,R),r=Object(G.a)(a,2),o=r[0],l=r[1],u=Object(n.useMemo)((function(){return{store:o,dispatch:l}}),[o,l]);return c.a.createElement(w.Provider,{value:u},t)},S=a(11),P=a.n(S),q=P.a.header,H=P.a.bar,W=P.a.input,U=P.a.buttonsPanel,V=P.a.formButton,J=P.a.cancel,z=M.b().shape({name:M.c().required().min(5),phone:M.a().required().positive().integer().test("len","Must be exactly 5 characters",(function(e){return e.toString().length>4}))}),Y=function(e){var t=e.closeFunc,a=e.submitFunc,r=Object(T.a)({validationSchema:z}),o=r.register,l=r.handleSubmit,u=r.setValue,i=r.errors,s=r.clearError,m=Object(n.useContext)(w).store.currentContactData,d=m.name,p=m.phone,E=m.id,h=l((function(e){var n=e.name,c=e.phone;a({name:n,phone:c,id:E}),t()}));return Object(n.useEffect)((function(){u([{name:d},{phone:p}]),s()}),[d,p,u,s]),c.a.createElement("div",null,E?c.a.createElement("h2",{className:q},"Edit"):c.a.createElement("h2",{className:q},"Add"),c.a.createElement("hr",{className:H}),c.a.createElement("form",{onSubmit:h},c.a.createElement("label",null,"Name",c.a.createElement("input",{className:W,type:"text",name:"name",defaultValue:d,ref:o({required:"Name is required",minLength:{value:5,message:"Name must be at least 5 characters long"}})})),i.name&&c.a.createElement("p",null,"Name is invalid"),c.a.createElement("label",null,"Phone",c.a.createElement("input",{className:W,type:"text",name:"phone",defaultValue:p,ref:o({required:"Phone is required",minLength:{value:5,message:"Phone must be at least 5 digits long"}})})),i.phone&&c.a.createElement("p",null,"Phone is invalid"),c.a.createElement("div",{className:U},c.a.createElement("button",{onClick:t,className:"".concat(V," ").concat(J)},"Cancel"),c.a.createElement("input",{type:"submit",value:"Submit",className:V}))))},X=a(33),$=a.n(X),K=$.a.modalMenu,Q=$.a.modalMenuOverlay,Z=$.a.modalMenuContent,ee=function(e){var t=e.closeFunc,a=e.active,n=e.children;return c.a.createElement(c.a.Fragment,null,a&&c.a.createElement("div",{className:K},c.a.createElement("div",{className:Q,onClick:function(){return t()}}),c.a.createElement("div",{className:Z},n)))},te=a(23),ae=a.n(te),ne=function(){var e=Object(n.useContext)(w),t=e.store.contactFormActive,a=e.dispatch,r=function(){var e=Object(C.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CLEAN_LOADING"}),n=t.id?"put":"post",e.next=4,ae.a.request({baseURL:x,method:n,data:t});case 4:e.sent&&a({type:"UPDATE"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(ee,{active:t,closeFunc:function(){return a({type:"TOGGLE_EDIT_FORM"})}},c.a.createElement(Y,{closeFunc:function(){return a({type:"TOGGLE_EDIT_FORM"})},submitFunc:r}))},ce=P.a.header,re=P.a.buttonsPanel,oe=P.a.formButton,le=P.a.cancel,ue=P.a.bar,ie=function(e){var t=e.closeFunc,a=e.submitFunc,r=Object(n.useContext)(w).store.currentContactData,o=r.name,l=r.id;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(l),t()}},c.a.createElement("h2",{className:ce},"Are you sure you want to delete ",o,"?"),c.a.createElement("hr",{className:ue}),c.a.createElement("div",{className:re},c.a.createElement("button",{onClick:t,className:"".concat(oe," ").concat(le)},"Cancel"),c.a.createElement("input",{type:"submit",value:"Confirm",className:oe}))))},se=function(){var e=Object(n.useContext)(w),t=e.store.deleteFormActive,a=e.dispatch,r=function(){var e=Object(C.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CLEAN_LOADING"}),e.next=3,ae.a.delete(x+t);case 3:e.sent&&a({type:"UPDATE"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(ee,{active:t,closeFunc:function(){return a({type:"TOGGLE_DELETE_FORM"})}},c.a.createElement(ie,{closeFunc:function(){return a({type:"TOGGLE_DELETE_FORM"})},submitFunc:r}))},me=a(58),de=a.n(me).a.searchBarContainer;function pe(){var e=Object(T.a)(),t=e.register,a=e.handleSubmit,r=Object(n.useContext)(w).dispatch,o=a((function(e){var t=e.search;r({type:"SEARCH",payload:t}),r({type:"TOGGLE_LOADING",payload:!0}),console.log(t)}));return c.a.createElement("form",{onSubmit:o,className:de},c.a.createElement("input",{name:"search",type:"text",placeholder:"search...",ref:t}))}var Ee=a(17),he=a.n(Ee),fe=he.a.listItem,_e=he.a.buttonPanel,be=he.a.listItemWithButtons,ve=function(e){var t=e.name,a=e.phone,r=e.id,o=Object(n.useContext)(w).dispatch;return c.a.createElement("div",{className:"".concat(fe," ").concat(be)},c.a.createElement("div",null,c.a.createElement("p",null,t),c.a.createElement("p",null,a)),c.a.createElement("div",{className:_e},c.a.createElement("button",{onClick:function(){return o({type:"TOGGLE_EDIT_FORM",payload:{name:t,phone:a,id:r}})}},c.a.createElement(_.a,{icon:b.a})),c.a.createElement("button",{onClick:function(){return o({type:"TOGGLE_DELETE_FORM",payload:{name:t,phone:a,id:r}})}},c.a.createElement(_.a,{icon:b.b}))))},Oe=he.a.listItemLoader,ye=he.a.listItem,Ne=function(){var e=Object(n.useContext)(w).dispatch;return c.a.createElement("div",{className:"".concat(Oe," ").concat(ye),onClick:function(){return e({type:"OFFSET"}),void e({type:"TOGGLE_LOADING",payload:!0})}},c.a.createElement("h3",null,"Load more..."))},Le=a(59),je=a.n(Le).a.list,Fe=he.a.listItem,ge=function(e){var t=e.isLoading,a=e.data,n=e.error;return c.a.createElement("div",{className:je},!n&&a&&c.a.createElement("div",null,a.map((function(e,t){var a=e.name,n=e.phone,r=e.id;return c.a.createElement(ve,{name:a,phone:n,id:r,key:t})}))),t&&!n&&c.a.createElement("div",{className:Fe},"Loading..."),!t&&!n&&a&&a.length%10===0&&0!==a.length&&c.a.createElement(Ne,null),!t&&a&&0===a.length&&c.a.createElement("div",{className:Fe},"No contacts found :/"),!t&&n&&c.a.createElement("div",{className:Fe},n))},Ae=function(){var e=Object(n.useContext)(w),t=e.store,a=t.isLoading,r=t.data,o=t.error,l=t.search,u=t.offset,i=t.updateSwitch,s=e.dispatch;return Object(n.useEffect)((function(){!function(e){var t=e.search,a=e.offset;ae.a.get(t?"".concat(x,"/search/").concat(t):a?"".concat(x,"/offset/").concat(a):x).then((function(e){s({type:a&&!t?"PUSH_MORE_DATA":"DATA_FETCHED",payload:e.data.data})})).catch((function(e){s({type:"ERROR",payload:"There has been an error"})})).finally((function(){return s({type:"TOGGLE_LOADING",payload:!1})}))}({search:l,offset:u})}),[l,u,s,i]),c.a.createElement(ge,{isLoading:a,data:r,error:o})},Ce=L.a.page;function Te(){var e=Object(n.useContext)(w).dispatch;return c.a.createElement("div",null,c.a.createElement(pe,null),c.a.createElement("div",{className:Ce},c.a.createElement(y,{action:function(){return e({type:"TOGGLE_EDIT_FORM"})}}),c.a.createElement(Ae,null)),c.a.createElement(ne,null),c.a.createElement(se,null))}var Me=function(){return c.a.createElement("div",{id:"App"},c.a.createElement(l.a,null,c.a.createElement(B,null,c.a.createElement(f,{links:[{name:"Home",path:"/"},{name:"About",path:"/about"},{name:"React-pg-crud",path:"/",brand:!0}]}),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:Te}),c.a.createElement(u.a,{path:"/about",component:F})))))};a(88),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.f9550fc9.chunk.js.map